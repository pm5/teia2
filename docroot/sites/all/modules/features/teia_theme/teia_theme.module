<?php
/**
 * @file
 * Code for the teia_theme feature.
 */

include_once 'teia_theme.features.inc';

function teia_theme_menu_block_get_menus() {
  $menus = array();
  $menus['menu-secondary-menu'] = '';
  $menus['menu-content-menu'] = '';
  return $menus;
}

function teia_theme_menu_block_blocks()
{
  return array(
    'teia_theme_secondary_menu' => array(
      'menu_name' => 'menu-secondary-menu',
      'parent_mlid' => 0,
      'title_link' => FALSE,
      'admin_title' => 'Secondary menu',
      'level' => 0,
      'follow' => 0,
      'depth' => 2,
      'expanded' => TRUE,
      'sort' => FALSE,
    ),
    'teia_theme_content_menu' => array(
      'menu_name' => 'menu-content-menu',
      'parent_mlid' => 0,
      'title_link' => FALSE,
      'admin_title' => 'Content menu',
      'level' => 0,
      'follow' => 0,
      'depth' => 2,
      'expanded' => TRUE,
      'sort' => FALSE,
    ),
  );
}

function teia_theme_block_languae_menu_view()
{
  global $language;
  return array(
    'subject' => '<none>',
    'content' =>
      '<div class="menu" id="lang-menu">'
      . ($language->language === 'zh-hant' ? '<a href="/en">English</a>' : '<a href="/zh-hant">中文</a>')
      . ' / '
      . ($language->language === 'ja' ? '<a href="/en">English</a>' : '<a href="/ja/about">日本語</a>')
      . '</div>',
  );
}

/**
 * Implements hook_block_info().
 */
function teia_theme_block_info() {
  $blocks = array();
  $blocks['teia_theme_language_menu'] = array(
    'info' => t('Language menu'),
  );
  $blocks['teia_theme_facebook_link'] = array(
    'info' => t('Facebook link'),
  );
  $blocks['teia_theme_twitter_link'] = array(
    'info' => t('Twitter link'),
  );
  $blocks['teia_donate_now'] = array(
    'info' => t('協會募款鍵'),
  );
  $blocks['teia_footer_copyright'] = array(
    'info' => t('頁尾版權聲明'),
  );
  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function teia_theme_block_view($delta = '') {
  if ($delta == 'teia_theme_language_menu') {
    return teia_theme_block_languae_menu_view();
  } else if ($delta == 'teia_theme_facebook_link') {
    return array(
      'subject' => '<none>',
      'content' => '<div class="social-network" id="facebook"><a href="https://www.facebook.com/TEIA.npo" target="_blank"><img src="/sites/all/themes/teiazen/images/fb16.png" /></a></div>',
    );
  } else if ($delta == 'teia_theme_twitter_link') {
    return array(
      'subject' => '<none>',
      'content' => '<div class="social-network" id="twitter"><a href="http://twitter.com/teiatw" target="_blank"><img src="/sites/all/themes/teiazen/images/tw16.png" /></a></div>',
    );
  } else if ($delta === 'teia_donate_now') {
    return array(
      'subject' => '<none>',
      'content' => '<div><a href="https://e-info.neticrm.tw/civicrm/contribute/transact?reset=1&amp;id=9" id="donate-now" target="_blank"></a></div>',
    );
  } else if ($delta === 'teia_footer_copyright') {
    global $language;
    return array(
      'subject' => '<none>',
      'content' => ($language->language === 'zh-hant' ? '<p><a href="http://www.e-info.org.tw/">社團法人台灣環境資訊協會</a> <a href="http://www.e-info.org.tw/">http://www.e-info.org.tw/</a> Copyright&copy;2001<br />本站圖文版權屬台灣環境資訊協會所有，歡迎非營利轉載引用<br /><span style="line-height: 1.5em;">地址：台灣台北市 116 文山區萬隆街38號</span><br /><span style="line-height: 1.5em;">電話：02-2933-2233 FAX：02-2933-2120</span><br /><span style="line-height: 1.5em;">Since 2001</span><br /><span style="line-height: 1.5em;">瀏覽網站最佳瀏覽器-建議使用 IE9、Chrome、Firefox、Safari。</span></p>' : '<p><a href="http://www.e-info.org.tw/">Taiwan Environmental Information Association</a> <a href="http://www.e-info.org.tw/">http://www.e-info.org.tw/</a> Copyright&copy;2001<br />All rights reserved. Permission granted for non-commercial use.<br /><span style="line-height: 1.5em;">Add: No.38, Wanlong St., Wenshan Dist., Taipei 116, Taiwan</span><br /><span style="line-height: 1.5em;">Tel: +886-2-2933-2233  FAX: +886-2-2933-2120</span><br /><span style="line-height: 1.5em;">Since 2001</span><br /><span style="line-height: 1.5em;">Best viewed in IE9, Chrome, Firefox and Safari.</span></p>'),
    );
  }
}
